
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>DevOps and Tools · Steven Klein's Resume and Portfolio</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Steven Klein">
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="styles/website.css">
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="miscellaneous.html" />
    
    
    <link rel="prev" href="projects.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Work</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="projects.html">
            
                <a href="projects.html">
            
                    
                    Projects
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="2.2" data-path="devops-tools.html">
            
                <a href="devops-tools.html">
            
                    
                    DevOps and Tools
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="miscellaneous.html">
            
                <a href="miscellaneous.html">
            
                    
                    Miscellaneous
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Resume</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="resume.html">
            
                <a href="resume.html#summary">
            
                    
                    Summary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="resume.html">
            
                <a href="resume.html#experience">
            
                    
                    Experience
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="resume.html">
            
                <a href="resume.html#skills">
            
                    
                    Skills
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="resume.html">
            
                <a href="resume.html#education">
            
                    
                    Education
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="resume.html">
            
                <a href="resume.html#certifications">
            
                    
                    Certifications
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Downloads</li>
        
        
    
        <li class="chapter " data-level="4.1" >
            
                <a target="_blank" href="https://github.com/steven-klein/portfolio/raw/gh-pages/assets/downloads/steven-klein-resume.pdf">
            
                    
                    Formatted Resume
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >DevOps and Tools</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="devops-and-tools">DevOps and Tools</h1>
<p>Building a strong toolset for efficient development has been paramount for my career and is something that I&apos;m constantly refining and improving.</p>
<h2 id="containers-infrastructure-as-code-and-bluegreen-deployments">Containers, Infrastructure as Code, and Blue/Green Deployments</h2>
<p>When I first started working at Ars Technica most of our infrastructure was managed by a third party using VMware vSphere, with a static number of application servers up at all times.  This was okay, but it didn&apos;t give us a way to dynamically scale the number of application servers based on traffic, which is great for maintaining a quality of service for your users and saving on infrstructure costs when traffic is light. It also left us with a panick inducing deployment method orchestrated by a build server that swapped out the code base on each node while it was actively receiving traffic. Finally, managing each server had to be done manually, taking it out of the cluster to run updates before putting it back in.  It required a lot of oversight from a small development team that really needed to be more focused on the codebase.  After making the decision to containerize the individual applications we had a new opportunity to reimagine the infrasructure we needed, reconsider how we&apos;d want to manage that infrastructure, and to completely redesign our deployment strategy.</p>
<p>We didn&apos;t really have a choice in using AWS as the provider, but with what it offered us it was the clear choice.  Our containerized apps could be deployed on Fargate with auto scaling policies that scaled-in and out based on the traffic we were receiving at the Application Load Balancer, the database and cache clusters could be managed easily with Aurora Serverless and ElastiCache, and our object store of course could use S3.  Beyond that we&apos;d also be making use of ECS, EC2, ElsticSearch, CloudFront, ParameterStore, Lambda, CodeBuild, CodePipeline, CodeDeploy, WAF and more. Plus, with ECS, CodeDeploy, and Application Load Balancer we were able to design my favorite feature of this new stack: Blue/Green Deployments.</p>
<p>With all of those peices of the puzzle determined now we needed to understand how best to manage it.  It was clearly too many services to manage just through the web console and ideally we&apos;d have a history of changes and wanted to be able to duplicate the entire stack for a 1-to-1 staging environment, enter Terraform.  With Terraform&apos;s declarative language we can understand what the application infrastructure is composed of with out ever needing to open the web console.  Our changes are tracked in a Git repository making it easy to understand why things changed or roll back as needed and we have a staging stack that is as close to 1-to-1 with our production environment as you can get.  Using a tagging convention that includes the environment meant we could easily name and tag each resource we created by environment.</p>
<pre><code class="lang-hcl">locals {
  project_name = &quot;arx&quot;

  env = lower(var.workspace)

  name_prefix = &quot;${local.project_name}-${local.env}&quot;

  common_tags = {
    Project     = local.project_name
    Environment = local.env
    Terraform   = &quot;true&quot;
  }
}

/**
 * APPLICATION LOAD BALANCER
 */
resource &quot;aws_lb&quot; &quot;web_apps_alb&quot; {
  name               = &quot;${local.name_prefix}-public-alb&quot;
  tags = merge(local.common_tags, { Name = &quot;${local.name_prefix}-web-apps-public-alb&quot; })
}
</code></pre>
<div class="image-grid">
    <p><img src="assets/images/projects/terraform.png"></p>
</div>

<p><strong>Highlights</strong><br>All told we had 190 different resources at work for each environment.  You&apos;d think that would have meant we&apos;d need a dedicated DevOps specialist to keep track of all of those resources, but containerized apps on AWS services managed by Terraform left us feeling really good about maintaining our infrastructure while continuing to contribute to the application codebase ourselves. To top it all off we reduced our infrastructure costs by 50%.</p>
<p><strong>Tags</strong>
Terraform, DevOps, AWS</p>
<h2 id="cli-aws-secrets-management">CLI AWS Secrets Management</h2>
<p>The AWS Systems Manager Parameter Store is a great tool for storing and providing secrets to applications.  It works especially well with containerized applications launched on AWS Fargate where you can define the path to the secrets necessary for the apps environment through the launchspec template.  Managing those secrets through the AWS console though can be a little cumbersome and make setting up local environments a complicated process.  There are some solid CLI tools already out there for this, Segmentio/Chamber being the best, but at Ars Technica we were managing a lot of secrets for multiple applications and environments with a custom naming convention that just didn&apos;t quite work with Segmentio/Chamber.  I also wanted import/export capabilities based on the .env format since most PHP applications manage local environment secrets that way.  Using the Yargs, AWS-SDK, and Dotenv packages from NPM I was able to create a Chamber clone that had everything we needed, nothing we didn&apos;t, and could be used in future applications. </p>
<p><strong>Highlights</strong><br>Having unique command line tools at your teams disposal saves time and energy.  They&apos;re realtively easy to compose and distribute using Node.js.</p>
<p><strong>Tags</strong>
Node, CLI, Scripts, DevOps</p>
<pre><code class="lang-sh"><span class="hljs-comment"># get help arguments wrapped in &lt;&gt; are required, [] are optional</span>
$ arx-chamber --help

<span class="hljs-comment"># get a single parameter store value &lt;workspace&gt; &lt;app&gt; &lt;key&gt;</span>
$ arx-chamber get development acta DB_HOST

<span class="hljs-comment"># set a single parameter store value &lt;workspace&gt; &lt;app&gt; &lt;key&gt; &lt;value&gt;</span>
$ arx-chamber <span class="hljs-built_in">set</span> development acta DB_HOST localhost

<span class="hljs-comment"># delete a single parameter store value &lt;workspace&gt; &lt;app&gt; &lt;key&gt;</span>
$ arx-chamber delete development acta DB_HOST

<span class="hljs-comment"># list all parameters by path [workspace] [app] note: this is recursive, leave out [app] then [workspace] in that order to move up the path</span>
$ arx-chamber list development acta
$ arx-chamber list development
$ arx-chamber list

<span class="hljs-comment"># export that list to a json file</span>
$ arx-chamber list development acta &gt; output.json

<span class="hljs-comment"># export to .env &lt;workspace&gt; &lt;app&gt; [filepath]</span>
$ arx-chamber <span class="hljs-built_in">export</span> development acta output.env

<span class="hljs-comment"># import from a .env file &lt;workspace&gt; &lt;app&gt; [filepath]</span>
$ arx-chamber import development acta import.env
</code></pre>
<h2 id="frontend-assets-boilerplate"><a href="https://github.com/steven-klein/rollup-postcss-cssnext" target="_blank">Frontend Assets Boilerplate</a></h2>
<p>Modern front-end development requires an effective method for compiling, processing, and minifying assets.  After working with many CSS pre and post processors, JS bundlers, minifiers, task runners, and modules of all sorts, I&apos;ve found NPM scripts that make direct calls to various modules to be the best all around method for bundling assets.  Typically, I use PostCSS with cssnext for style development and Rollup.js + Buble for JavaScript (when I&apos;m not using a reactive JS framework) and BrowserSync for live updating, leveraging the proxy feature for applications that have dynamic backend programming.  I&apos;m a huge fan of Yarn for handling my package dependencies to guarantee any developers collaborating on a project are using the same version of each module.</p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;scripts&quot;</span>: {
        <span class="hljs-string">&quot;build&quot;</span>: <span class="hljs-string">&quot;npm-run-all --serial clean --parallel copy js css&quot;</span>,
        <span class="hljs-string">&quot;dev&quot;</span>: <span class="hljs-string">&quot;npm run watch&quot;</span>,
        <span class="hljs-string">&quot;clean&quot;</span>: <span class="hljs-string">&quot;npm-run-all --serial clean:**&quot;</span>,
        <span class="hljs-string">&quot;clean:build&quot;</span>: <span class="hljs-string">&quot;del-cli build&quot;</span>,
        <span class="hljs-string">&quot;deploy:prod&quot;</span>: <span class="hljs-string">&quot;cross-env NODE_ENV=production npm run build &amp;&amp; project-sync production up&quot;</span>,
        <span class="hljs-string">&quot;deploy:stage&quot;</span>: <span class="hljs-string">&quot;cross-env NODE_ENV=production npm run build &amp;&amp; project-sync staging up&quot;</span>,
        <span class="hljs-string">&quot;copy&quot;</span>: <span class="hljs-string">&quot;npm-run-all --parallel copy:**&quot;</span>,
        <span class="hljs-string">&quot;copy:img&quot;</span>: <span class="hljs-string">&quot;cpx \&quot;src/img/**/*.{jpg,gif,png,svg}\&quot; build/img&quot;</span>,
        <span class="hljs-string">&quot;css&quot;</span>: <span class="hljs-string">&quot;postcss -c postcss.config.js&quot;</span>,
        <span class="hljs-string">&quot;js&quot;</span>: <span class="hljs-string">&quot;rollup -c rollup.config.js&quot;</span>,
        <span class="hljs-string">&quot;postversion&quot;</span>: <span class="hljs-string">&quot;git push &amp;&amp; git push --tags&quot;</span>,
        <span class="hljs-string">&quot;serve&quot;</span>: <span class="hljs-string">&quot;browser-sync start -c browsersync.config.js&quot;</span>,
        <span class="hljs-string">&quot;test&quot;</span>: <span class="hljs-string">&quot;cross-env NODE_ENV=production npm run build&quot;</span>,
        <span class="hljs-string">&quot;watch&quot;</span>: <span class="hljs-string">&quot;npm-run-all build --parallel \&quot;js -- --watch\&quot; \&quot;css -- --watch\&quot; \&quot;copy:img -- --watch\&quot; serve&quot;</span>
    }
}
</code></pre>
<pre><code class="lang-bash"><span class="hljs-comment"># install dependencies with yarn</span>
$ yarn

<span class="hljs-comment"># build</span>
$ npm run build

<span class="hljs-comment"># dev</span>
$ npm run dev
</code></pre>
<p><strong>Highlights</strong><br>NPM Scripts are easy to write, can be given aliases that are intuitive for devlopers and chained together for a very effective workflow.  Gulp and Grunt are great, but I often wonder if the additional layer is really necessary.  An easy way to help developers adapt to using NPM scripts, is to create aliases in existing processes for task runners like <code>build: gulp</code> or <code>dev: gulp watch</code>.</p>
<p><strong>Tags</strong><br>NPM Scripts, PostCSS, cssnext, JavaScript, Rollup.js, Buble, CPX, BrowserSync, npm-run-all</p>
<h2 id="project-sync"><a href="https://www.npmjs.com/package/project-sync" target="_blank">Project Sync</a></h2>
<p>I remember trying to FTP my files to the server.  I even remember editing live files via FTP, boy how the times have changed.  I created Project Sync, so I could stop fumbling around with rsync from the command line and instead quickly push my changes up to any number of servers with a simple command <code>project-sync production up</code>.</p>
<p>I&apos;m hoping to continue development of this module and have been designing a version 2 that will transition to ES2015 syntax and include a few new features.</p>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;servers&quot;</span>: {
    <span class="hljs-string">&quot;production&quot;</span>: {
      <span class="hljs-string">&quot;host&quot;</span>: <span class="hljs-string">&quot;user@example.com&quot;</span>,
      <span class="hljs-string">&quot;path&quot;</span>: <span class="hljs-string">&quot;/var/www/vhosts/some/path&quot;</span>,
      <span class="hljs-string">&quot;exclude&quot;</span>: [<span class="hljs-string">&quot;.env&quot;</span>],
      <span class="hljs-string">&quot;delete&quot;</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-string">&quot;staging&quot;</span>: {
      <span class="hljs-string">&quot;host&quot;</span>: <span class="hljs-string">&quot;user@example.com&quot;</span>,
      <span class="hljs-string">&quot;path&quot;</span>: <span class="hljs-string">&quot;/var/www/some/path&quot;</span>,
      <span class="hljs-string">&quot;exclude&quot;</span>: [],
      <span class="hljs-string">&quot;delete&quot;</span>: <span class="hljs-literal">true</span>
    }
  },
  <span class="hljs-string">&quot;excludeGlobal&quot;</span>: [<span class="hljs-string">&quot;project-sync.json&quot;</span>, <span class="hljs-string">&quot;.git&quot;</span>, <span class="hljs-string">&quot;node_modules&quot;</span>]
}
</code></pre>
<pre><code class="lang-bash"><span class="hljs-comment"># deploy to production server</span>
$ project-sync production up

<span class="hljs-comment"># deploy to staging server</span>
$ project-sync staging up
</code></pre>
<p><strong>Highlights</strong><br>Project Sync is easy to integrate into any existing workflow, or can be installed globally to be used as needed throughout project directories.  With the security of SSH, and the speed at which rsync works pushing up changes in environments that can handle a fraction of a second of potential downtime, this has become an extremely effective way for me to deploy projects.</p>
<p><strong>Tags</strong><br>Node.js, rsync, deployment</p>
<h2 id="stage-clistage-templates"><a href="https://www.npmjs.com/package/stage-cli" target="_blank">Stage CLI/Stage Templates</a></h2>
<p>Organization and clarity is important when you want to work in collaborative environments, and initiating projects is the best place to start with production in mind.  Too often developers use the cumbersome process of cloning a repo only to remove the history in order to start with some boilerplate or scaffolding for a project.  What&apos;s worse, is the README and name properties in files like package.json don&apos;t make sense for the project.  I found Vue.js&apos; command line utility for starting Vue based projects to be an awesome way to start projects, so I forked it and start every project big or small using a series of templates for my most common project types.  The end result is a project that has a minimum README necessary for other developers to get involved, plus any number of properties, scaffolding, scripts, and tests in place for creating real production ready projects.</p>
<pre><code class="lang-bash"><span class="hljs-comment"># Start a new wordpress project</span>
$ stage-init bitbucket.org:brkstn/wordposer my-new-site

<span class="hljs-comment"># Start a new html with handlebars project</span>
$ stage-init html-handlebars my-html-site
</code></pre>
<p><strong>Highlights</strong><br>In addition to the command line tool I&apos;ve started <a href="https://github.com/stage-templates" target="_blank">Stage Templates</a> where I hope to provide a better set of boilerplates for popular frameworks.  At my current position, we&apos;re already starting all projects with this tool.</p>
<p><strong>Tags</strong><br>command line, tools, boilerplate, production</p>
<h2 id="vagrant-lamp-stack">Vagrant LAMP Stack</h2>
<p>The last MacOS update broke your MAMP stack, now what?  Download Virtual Box and Vagrant and never look back.  While working at Breakstation Creative I refined the development process with not just a series of workflow tools but also a virtual environment that helps guarantee each developer gets the same results that they should expect from the production environment.</p>
<p>As much as I&apos;ve readily enjoyed Vagrant I&apos;m looking forward to working with Docker more and more as a portable environment that can stay and be easily adapted for each project.</p>
<pre><code class="lang-bash"><span class="hljs-comment"># Install Virtual Box: https://www.virtualbox.org/wiki/Downloads</span>

<span class="hljs-comment"># Install Vagrant: http://www.vagrantup.com/downloads</span>

<span class="hljs-comment"># Add vagrant plugins</span>
$ vagrant plugin install vagrant-hostsupdater &amp;&amp; vagrant plugin install vagrant-bindfs

<span class="hljs-comment"># Clone the repo</span>
$ git <span class="hljs-built_in">clone</span> git@bitbucket.org:organization/vagrant-repo.git ~/Sites/apache.local

<span class="hljs-comment"># Build</span>
$ <span class="hljs-built_in">cd</span> ~/Sites/apache.local &amp;&amp; vagrant up
</code></pre>
<p><strong>Highlights</strong><br>The primary LAMP stack leveraged Apaches VirtualDocumentRoot and DNSmasq in order to easily map any example.dev url to a vhost directory of the same name.</p>
<p><strong>Tags</strong><br>Vagrant, Virtual Box, LAMP, MAMP</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="projects.html" class="navigation navigation-prev " aria-label="Previous page: Projects">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="miscellaneous.html" class="navigation navigation-next " aria-label="Next page: Miscellaneous">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"DevOps and Tools","level":"2.2","depth":1,"next":{"title":"Miscellaneous","level":"2.3","depth":1,"path":"miscellaneous.md","ref":"miscellaneous.md","articles":[]},"previous":{"title":"Projects","level":"2.1","depth":1,"path":"projects.md","ref":"projects.md","articles":[]},"dir":"ltr"},"config":{"plugins":["github","-sharing"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css"},"pluginsConfig":{"github":{"url":"https://github.com/steven-klein/portfolio/"},"sharing":{"facebook":false,"twitter":false,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"Steven Klein","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Steven Klein's Resume and Portfolio","language":"en","gitbook":"*","description":"An experienced full stack developer who’s equally comfortable developing on the frontend or backend, collaborating with others on design and strategies, discussing solutions with clients, and deploying products.","direction":"ltr"},"file":{"path":"devops-tools.md","mtime":"2021-05-23T20:38:14.437Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-05-23T20:39:09.218Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

